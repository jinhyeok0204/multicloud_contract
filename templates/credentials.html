{% extends 'base.html' %}

{% block title %}자격 증명 등록{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">자격 증명 등록</h2>

    <div class="row justify-content-center">
        <div class="col-md-6">
            <form action="/credentials" method="POST" enctype="multipart/form-data">
                <!-- CSP 선택 -->
                <div class="form-group mb-3">
                    <label for="csp" class="form-label">클라우드 서비스 제공자 선택</label>
                    <select id="csp" name="csp" class="form-control" required>
                        <option value="" selected disabled>클라우드 서비스 제공자를 선택하세요</option>
                        <option value="AWS">AWS (Amazon Web Services)</option>
                        <option value="GCP">GCP (Google Cloud Platform)</option>
                        <option value="Azure">Azure (Microsoft Azure)</option>
                    </select>
                </div>

                <!-- 자격 증명 파일 업로드 -->
                <div class="form-group mb-3">
                    <label for="credential_file" class="form-label">자격 증명 파일 업로드</label>
                    <input type="file" name="credential_file" class="form-control" required>
                    <small class="form-text text-muted">
                        AWS 자격 증명 파일은 CSV 형식이어야 하며, GCP 및 Azure는 JSON 형식의 자격 증명 파일을 업로드하세요.
                    </small>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-primary btn-block">자격 증명 등록</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 자바스크립트 추가 -->
<script>
    document.getElementById('csp').addEventListener('change', function () {
        const selectedCSP = this.value;
        const uploadField = document.getElementById('credential_file');
        const hint = document.querySelector('.form-text');

        if (selectedCSP === 'AWS') {
            hint.textContent = 'AWS 자격 증명 파일은 CSV 형식이어야 합니다.';
        } else if (selectedCSP === 'GCP' || selectedCSP === 'Azure') {
            hint.textContent = 'GCP 및 Azure는 JSON 형식의 자격 증명 파일을 업로드하세요.';
        } else {
            hint.textContent = '';
        }
    });
</script>

{% endblock %}
